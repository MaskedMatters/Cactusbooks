<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Including the head partial for consistency -->
        <%- include('../partials/head'); %>
    </head>
    <body>
        <header>
            <!-- Including the header partial -->
            <%- include('../partials/header'); %>
        </header>

        <main>
            <!-- Button to trigger the modal for creating a new test -->
            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#createTestModal">
                Create New Test +
            </button>

            <!-- Modal structure for creating a new test -->
            <div class="modal fade" id="createTestModal" tabindex="-1" aria-labelledby="createTestModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <!-- Modal header -->
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="createTestModalLabel">Create New Test</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <p>
                                To create a test, you must first have a JSON file structured for test creation. 
                                You can either upload a JSON file or write one now.
                                Please only fill out the form you are going to use, not both.
                            </p>

                            <!-- Tabs navigation -->
                            <ul class="nav nav-tabs" id="createTestTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload-tab-pane" type="button" role="tab" aria-controls="upload-tab-pane" aria-selected="true">Upload JSON</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="write-tab" data-bs-toggle="tab" data-bs-target="#write-tab-pane" type="button" role="tab" aria-controls="write-tab-pane" aria-selected="false">Write JSON</button>
                                </li>
                            </ul>

                            <!-- Tabs content -->
                            <div class="tab-content mt-3" id="createTestTabsContent">
                                <!-- Upload JSON tab -->
                                <div class="tab-pane fade show active" id="upload-tab-pane" role="tabpanel" aria-labelledby="upload-tab">
                                    <!-- Upload form goes here -->
                                    <form action="/validate" method="post">
                                        <div class="mb-3">
                                            <label for="titleInput" class="form-label">Test Name</label>
                                            <input type="text" class="form-control" id="titleInput" name="titleInput" placeholder="My Cactusbook Test">
                                        </div>
                                        <div class="mb-3">
                                            <label for="formFile" class="form-label">Test Q&A JSON (File)</label>
                                            <input class="form-control" type="file" id="formFile" name="formFile">
                                        </div>
                                        <button class="btn btn-primary form-control" type="submit">Continue to Test Details</button>
                                    </form>
                                </div>

                                <!-- Write JSON tab -->
                                <div class="tab-pane fade" id="write-tab-pane" role="tabpanel" aria-labelledby="write-tab">
                                    <!-- Write JSON form goes here -->
                                    <form action="/validate" method="post">
                                        <div class="mb-3">
                                            <label for="titleInput" class="form-label">Test Name</label>
                                            <input type="text" class="form-control" id="titleInput" name="titleInput" placeholder="My Cactusbook Test">
                                        </div>
                                        <div class="mb-3">
                                            <label for="formText" class="form-label">Test Q&A JSON</label>
                                            <textarea class="form-control" id="formText" name="formText" rows="6"></textarea>
                                        </div>
                                        <button class="btn btn-primary form-control" type="submit">Continue to Test Details</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel Test Creation</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bootstrap JS bundle -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="/public/javascript/index.js"></script>
    </body>
</html>
